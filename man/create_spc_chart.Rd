% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create_spc_chart.R
\name{create_spc_chart}
\alias{create_spc_chart}
\title{Create SPC Chart - High-Level Convenience Function}
\usage{
create_spc_chart(
  data,
  x,
  y,
  n = NULL,
  chart_type = "run",
  y_axis_unit = "count",
  chart_title = NULL,
  target_value = NULL,
  target_text = NULL,
  comment_column = NULL,
  part = NULL,
  freeze = NULL,
  base_size = 14,
  width = NULL,
  height = NULL
)
}
\arguments{
\item{data}{Data frame with measurements}

\item{x}{Name of x-axis column (unquoted, NSE). Usually date/time column.}

\item{y}{Name of y-axis column (unquoted, NSE). The measurement variable.}

\item{n}{Name of denominator column for ratio charts (optional, unquoted, NSE)}

\item{chart_type}{Chart type: "run", "i", "p", "c", "u", "xbar", "s", "t", "g"}

\item{y_axis_unit}{Unit type: "count", "percent", "rate", or "time"}

\item{chart_title}{Plot title (optional)}

\item{target_value}{Numeric target value (optional)}

\item{target_text}{Target label text (optional)}

\item{comment_column}{Name of comment column for annotations (optional, quoted)}

\item{part}{Positions for phase splits (optional numeric vector)}

\item{freeze}{Position to freeze baseline (optional integer)}

\item{base_size}{Base font size in points (default: auto-calculated from width/height if provided, otherwise 14)}

\item{width}{Plot width in inches (optional, enables responsive font scaling and precise label placement)}

\item{height}{Plot height in inches (optional, enables responsive font scaling and precise label placement)}
}
\value{
ggplot2 object with styled SPC chart
}
\description{
One-function approach to create publication-ready SPC charts.
Wraps qicharts2 calculation and BFH visualization in a single call.

Convenience function that combines qicharts2::qic() calculation with
BFH-styled visualization and automatic label placement. Handles the
entire workflow from raw data to finished plot with intelligent labels.
}
\details{
\strong{Chart Types:}
\itemize{
\item \strong{run}: Run chart (no control limits)
\item \strong{i}: I-chart (individuals)
\item \strong{p}: P-chart (proportions, requires n)
\item \strong{c}: C-chart (counts)
\item \strong{u}: U-chart (rates, requires n)
\item \strong{xbar}: X-bar chart
\item \strong{s}: S-chart
\item \strong{t}: T-chart (time between events)
\item \strong{g}: G-chart (geometric)
}

\strong{Y-Axis Units:}
\itemize{
\item \strong{count}: Integer counts with K/M notation
\item \strong{percent}: Percentage values (0-100\%)
\item \strong{rate}: Decimal values with comma notation
\item \strong{time}: Context-aware minutes/hours/days
}

\strong{Phase Configuration:}
\itemize{
\item \code{part}: Vector of positions where phase splits occur (e.g., \code{c(12, 24)})
\item \code{freeze}: Position to freeze baseline calculation
}

\strong{Responsive Typography:}
When \code{width} and \code{height} are provided, \code{base_size} is automatically
calculated using geometric mean: \verb{sqrt(width × height) / 3.5}
This ensures fonts scale proportionally with plot size.
Override by explicitly setting \code{base_size}.

\strong{Automatic Label Placement:}
Labels are automatically added to the plot showing:
\itemize{
\item Current level (CL) from the most recent phase
\item Target value (if specified via \code{target_value} or \code{target_text})
\item Intelligent collision avoidance with multi-level fallback strategy
\item Provide \code{width} and \code{height} for optimal label sizing and placement
}

\strong{Arrow Symbol Suppression:}
If \code{target_text} contains arrow symbols (↑ ↓ or < >), the target line will be
suppressed and only the directional indicator shown at the plot edge.
}
\examples{
\dontrun{
library(BFHcharts)

# Example 1: Simple run chart with monthly data
data <- data.frame(
  month = seq(as.Date("2024-01-01"), by = "month", length.out = 24),
  infections = rpois(24, lambda = 15),
  surgeries = rpois(24, lambda = 100)
)

plot <- create_spc_chart(
  data = data,
  x = month,
  y = infections,
  chart_type = "run",
  y_axis_unit = "count",
  chart_title = "Monthly Hospital-Acquired Infections"
)
plot

# Example 2: P-chart with target line
plot <- create_spc_chart(
  data = data,
  x = month,
  y = infections,
  n = surgeries,
  chart_type = "p",
  y_axis_unit = "percent",
  chart_title = "Infection Rate per 100 Surgeries",
  target_value = 2.0,
  target_text = "↓ Målet: 2\%"
)
plot

# Example 3: I-chart with phase splits
plot <- create_spc_chart(
  data = data,
  x = month,
  y = infections,
  chart_type = "i",
  y_axis_unit = "count",
  chart_title = "Infections with Intervention",
  part = c(12), # Phase split after 12 months
  freeze = 12 # Freeze baseline at month 12
)
plot

# Example 4: Responsive typography with viewport dimensions
# Small plot (6×4 inches) → base_size ≈ 14pt
plot_small <- create_spc_chart(
  data = data, x = month, y = infections,
  chart_type = "i", y_axis_unit = "count",
  chart_title = "Small Plot - Auto Scaled Typography",
  width = 6, height = 4  # Auto: base_size ≈ 14pt
)

# Medium plot (10×6 inches) → base_size ≈ 22pt
plot_medium <- create_spc_chart(
  data = data, x = month, y = infections,
  chart_type = "i", y_axis_unit = "count",
  chart_title = "Medium Plot - Auto Scaled Typography",
  width = 10, height = 6  # Auto: base_size ≈ 22pt
)

# Large plot (16×9 inches) → base_size ≈ 34pt
plot_large <- create_spc_chart(
  data = data, x = month, y = infections,
  chart_type = "i", y_axis_unit = "count",
  chart_title = "Large Plot - Auto Scaled Typography",
  width = 16, height = 9  # Auto: base_size ≈ 34pt
)

# Override auto-scaling with explicit base_size
plot_custom <- create_spc_chart(
  data = data, x = month, y = infections,
  chart_type = "i", y_axis_unit = "count",
  chart_title = "Custom Typography Override",
  width = 10, height = 6,
  base_size = 18  # Explicit override
)
}
}
